<!doctype html><html lang="ja"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ログイン | 1on1フィードバックAI</title>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="app.css">
<style>
  .wrap{ max-width:420px; margin:12vh auto; background:#fff; border:1px solid var(--line); border-radius:var(--radius); padding:24px; box-shadow:var(--shadow); }
  h1{ margin:0 0 8px; font-size:20px; }
</style>
</head><body>
  <div class="wrap">
    <h1>ログイン</h1>
    <p class="hint">社内招待ユーザーのみ利用できます。</p>

    <label for="email">メールアドレス</label>
    <input id="email" type="email" placeholder="you@example.com" autocomplete="username">

    <label for="pw">パスワード</label>
    <input id="pw" type="password" placeholder="********" autocomplete="current-password">

    <button class="btn btn-primary" id="loginBtn">ログイン</button>
    <div class="hint" id="status"></div>
  </div>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL="https://ectryrbhvoyitqddvhhi.supabase.co";
  const SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjdHJ5cmJodm95aXRxZGR2aGhpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NTU4MzcsImV4cCI6MjA3NTIzMTgzN30.-anH9-j3ph0x36G1Gt-AGBtyOJZgoztoKwPCIVwgiw8";
  const sb = window.supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);

  (async()=>{ const { data:{ user } } = await sb.auth.getUser(); if(user) location.href="index.html"; })();

  document.getElementById("loginBtn").addEventListener("click", async ()=>{
    const email=document.getElementById("email").value.trim();
    const pw=document.getElementById("pw").value.trim();
    const s=document.getElementById("status");
    if(!email||!pw){ alert("メールとパスワードを入力してください"); return; }
    s.textContent="ログイン中…";
    const { error } = await sb.auth.signInWithPassword({ email, password:pw });
    if(error){ s.textContent="ログイン失敗: "+error.message; return; }
    location.href="index.html";
  });
</script>
</body></html>
